$(document).ready((function(){var t=$("#show-indicator-widget"),e=$("#show-indicator-div-widget"),i=$("#indicator-container"),r=$("#empty-div");t.on("click",(function(){var t=$("#target-popup"),e=parseInt($("#current-value").val()),r=parseInt($("#max-value").val());try{i.targetIndicator({maxValue:r,currentValue:e}),t.addClass("show")}catch(t){alert(t)}})),e.on("click",(function(){var t=parseInt($("#current-value").val()),e=parseInt($("#max-value").val());try{r.targetIndicator({maxValue:e,currentValue:t})}catch(t){alert(t)}})),$(document.body).on("click",(function(t){var e;$(t.target).hasClass("indicator-header__close-button")&&(e=$("#target-popup"),i.targetIndicator("destroy"),e.removeClass("show"))}))})),$.widget("custom.targetIndicator",{options:{maxValue:100,currentValue:0},_validation:function(){if(this.options.currentValue>this.options.maxValue||this.options.maxValue<=0||this.options.currentValue<0)throw this._destroy(),"Wrong initial options"},_create:function(){this._validation(),this.element.addClass("target-indicator-wrapper"),this.header=$("<header>",{class:"indicator-header"});var t=$("<span>",{text:"Target Indicator Demo",class:"indicator-header__text"}),e=$("<button>",{text:"X",class:"indicator-header__close-button"});this.body=$("<div>",{class:"indicator-body"});var i=$("<section>",{class:"indicator-section"}),r=$("<div>",{class:"indicator-section__progress-wrapper"}),s=$("<label>",{text:"Reached:",class:"indicator-section__label"});this.progressLineWrapper=$("<div>",{class:"indicator-section__progress-line-wrapper"}),this.progressLine=$("<div>",{class:"indicator-section__progress"}),this.progressCurrent=$("<div>",{text:this._getCurrentText(),class:"indicator-section__current-value"});var a=$("<div>",{class:"indicator-target__wrapper"}),n=$("<div>",{text:"Target",class:"indicator-target__header"}),o=$("<div>",{text:"$"+this.options.maxValue,class:"indicator-target__value"});this.hintText=$("<div>",{text:this._getHintText(this._getRemain()),class:"indicator-hint"}),a.append(n),a.append(o),r.append(s),this.progressLineWrapper.append(this.progressLine),this.progressLineWrapper.append(this.progressCurrent),r.append(this.progressLineWrapper),r.append(a),i.append(r),i.append(this.hintText),this.body.append(i),this.header.append(t),this.header.append(e),this.element.append(this.header),this.element.append(this.body),this.progressLine.width(0),this.created=!0,setTimeout(function(){this._refresh()}.bind(this),0)},_getRemain:function(){return this.options.maxValue-this.options.currentValue},_getCurrentText:function(){return"$"+this.options.currentValue},_getHintText:function(t){return"You need $"+t+" more to reach your target"},_refresh:function(){var t,e,i;this.created||this._create(),t=this.progressLineWrapper.width()/this.options.maxValue,e=this.progressCurrent.width(),i=this.options.currentValue*t,this.hintText.text(this._getHintText(this._getRemain())),this.progressCurrent.text(this._getCurrentText()),this.progressLine.width(i),this.progressCurrent.css("left",i-e/2)},_destroy:function(){this.header&&this.header.remove(),this.body&&this.body.remove(),console.log("widget destroyed")},_setOptions:function(){this._superApply(arguments),this._validation(),this._refresh()}});